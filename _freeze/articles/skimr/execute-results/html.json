{
  "hash": "bdde28d83b319af40d062650ff0647a0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"skimr\"\nauthor: \"データサイエンス関連基礎調査WG\"\ndate: \"2025-08-01\"\nformat: html\n---\n\n\n\n\n\n\n## パッケージの概要\n\n[**skimr**](https://cran.r-project.org/web/packages/skimr/) パッケージはデータフレームの要約に特化したパッケージです。`skimr()` 関数を用いることで、R の標準関数である `summary()` よりも詳細かつ視認性の高い要約を得ることができます。\n\n## データフレームを要約する\n\n`skim()` 関数をデータフレームに適用すると、特徴量ごとに欠損値の数（n_missing）、非欠損値の割合（complete_rate）、数値型（numeric）の特徴量の平均および標準偏差、因子型（factor）の特徴量の最頻水準や水準数などの要約が出力されます。特に、数値変数について簡易的なヒストグラムが出力される点が特徴的です。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'skimr' was built under R version 4.5.1\n```\n\n\n:::\n\n```{.r .cell-code}\nskim(iris)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |iris |\n|Number of rows           |150  |\n|Number of columns        |5    |\n|_______________________  |     |\n|Column type frequency:   |     |\n|factor                   |1    |\n|numeric                  |4    |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts                |\n|:-------------|---------:|-------------:|:-------|--------:|:-------------------------|\n|Species       |         0|             1|FALSE   |        3|set: 50, ver: 50, vir: 50 |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate| mean|   sd|  p0| p25|  p50| p75| p100|hist  |\n|:-------------|---------:|-------------:|----:|----:|---:|---:|----:|---:|----:|:-----|\n|Sepal.Length  |         0|             1| 5.84| 0.83| 4.3| 5.1| 5.80| 6.4|  7.9|▆▇▇▅▂ |\n|Sepal.Width   |         0|             1| 3.06| 0.44| 2.0| 2.8| 3.00| 3.3|  4.4|▁▆▇▂▁ |\n|Petal.Length  |         0|             1| 3.76| 1.77| 1.0| 1.6| 4.35| 5.1|  6.9|▇▁▆▇▂ |\n|Petal.Width   |         0|             1| 1.20| 0.76| 0.1| 0.3| 1.30| 1.8|  2.5|▇▁▇▅▃ |\n\n\n:::\n:::\n\n\n\n\n## 要約結果を加工・抽出する\n\n`skim()` 関数の返り値は、\"skim_df\" という特別なクラスを持つデータフレームです。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(iris_skim <- skim(iris))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"skim_df\"    \"tbl_df\"     \"tbl\"        \"data.frame\"\n```\n\n\n:::\n:::\n\n\n\n\n**skimr** には \"skim_df\" オブジェクトを加工するための関数が用意されています。たとえば、`yank()` 関数を用いることで特定のデータ型（`skim_type`）に関する情報を取り出すことができます。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 数値型特徴量を取り出す\niris_skim |> yank(\"numeric\")\n```\n\n::: {.cell-output-display}\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate| mean|   sd|  p0| p25|  p50| p75| p100|hist  |\n|:-------------|---------:|-------------:|----:|----:|---:|---:|----:|---:|----:|:-----|\n|Sepal.Length  |         0|             1| 5.84| 0.83| 4.3| 5.1| 5.80| 6.4|  7.9|▆▇▇▅▂ |\n|Sepal.Width   |         0|             1| 3.06| 0.44| 2.0| 2.8| 3.00| 3.3|  4.4|▁▆▇▂▁ |\n|Petal.Length  |         0|             1| 3.76| 1.77| 1.0| 1.6| 4.35| 5.1|  6.9|▇▁▆▇▂ |\n|Petal.Width   |         0|             1| 1.20| 0.76| 0.1| 0.3| 1.30| 1.8|  2.5|▇▁▇▅▃ |\n\n\n\n:::\n:::\n\n\n\n\nまた、`focus()` 関数を用いることで、特定の列を取り出すことができます。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 一部の要約を選択したのち因子型特徴量を取り出す\niris_skim |> focus(factor.n_unique, factor.ordered) |> yank(\"factor\")\n```\n\n::: {.cell-output-display}\n\n\n**Variable type: factor**\n\n|skim_variable | n_unique|ordered |\n|:-------------|--------:|:-------|\n|Species       |        3|FALSE   |\n\n\n\n:::\n:::\n\n\n\n\n## グループ化されたデータフレームを要約する\n\n`skim()` 関数は `group_by()` でグループ化されたデータフレームにも対応しており、各特徴量に関するグループごとの集計結果を出力することができます。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris |> dplyr::group_by(Species) |> skim()\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |                             |\n|:------------------------|:----------------------------|\n|Name                     |dplyr::group_by(iris, Spe... |\n|Number of rows           |150                          |\n|Number of columns        |5                            |\n|_______________________  |                             |\n|Column type frequency:   |                             |\n|numeric                  |4                            |\n|________________________ |                             |\n|Group variables          |Species                      |\n\n\n**Variable type: numeric**\n\n|skim_variable |Species    | n_missing| complete_rate| mean|   sd|  p0|  p25|  p50|  p75| p100|hist  |\n|:-------------|:----------|---------:|-------------:|----:|----:|---:|----:|----:|----:|----:|:-----|\n|Sepal.Length  |setosa     |         0|             1| 5.01| 0.35| 4.3| 4.80| 5.00| 5.20|  5.8|▃▃▇▅▁ |\n|Sepal.Length  |versicolor |         0|             1| 5.94| 0.52| 4.9| 5.60| 5.90| 6.30|  7.0|▂▇▆▃▃ |\n|Sepal.Length  |virginica  |         0|             1| 6.59| 0.64| 4.9| 6.23| 6.50| 6.90|  7.9|▁▃▇▃▂ |\n|Sepal.Width   |setosa     |         0|             1| 3.43| 0.38| 2.3| 3.20| 3.40| 3.68|  4.4|▁▃▇▅▂ |\n|Sepal.Width   |versicolor |         0|             1| 2.77| 0.31| 2.0| 2.52| 2.80| 3.00|  3.4|▁▅▆▇▂ |\n|Sepal.Width   |virginica  |         0|             1| 2.97| 0.32| 2.2| 2.80| 3.00| 3.18|  3.8|▂▆▇▅▁ |\n|Petal.Length  |setosa     |         0|             1| 1.46| 0.17| 1.0| 1.40| 1.50| 1.58|  1.9|▁▃▇▃▁ |\n|Petal.Length  |versicolor |         0|             1| 4.26| 0.47| 3.0| 4.00| 4.35| 4.60|  5.1|▂▂▇▇▆ |\n|Petal.Length  |virginica  |         0|             1| 5.55| 0.55| 4.5| 5.10| 5.55| 5.88|  6.9|▃▇▇▃▂ |\n|Petal.Width   |setosa     |         0|             1| 0.25| 0.11| 0.1| 0.20| 0.20| 0.30|  0.6|▇▂▂▁▁ |\n|Petal.Width   |versicolor |         0|             1| 1.33| 0.20| 1.0| 1.20| 1.30| 1.50|  1.8|▅▇▃▆▁ |\n|Petal.Width   |virginica  |         0|             1| 2.03| 0.27| 1.4| 1.80| 2.00| 2.30|  2.5|▂▇▆▅▇ |\n\n\n:::\n:::\n\n\n\n\n## データフレーム以外のオブジェクトを要約する\n\n**skimr** はデータフレームの要約を効率的に行うことを目的として設計されていますが、ベクトル、行列、時系列データなど、データフレームに変換することが可能な他のデータ型のオブジェクトに対しても使うことができます。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# integer型ベクトルのスキミング\nskim(1:100)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |      |\n|:------------------------|:-----|\n|Name                     |1:100 |\n|Number of rows           |100   |\n|Number of columns        |1     |\n|_______________________  |      |\n|Column type frequency:   |      |\n|numeric                  |1     |\n|________________________ |      |\n|Group variables          |None  |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate| mean|    sd| p0|   p25|  p50|   p75| p100|hist  |\n|:-------------|---------:|-------------:|----:|-----:|--:|-----:|----:|-----:|----:|:-----|\n|data          |         0|             1| 50.5| 29.01|  1| 25.75| 50.5| 75.25|  100|▇▇▇▇▇ |\n\n\n:::\n\n```{.r .cell-code}\n# 行列のスキミング\nskim(matrix(1:9, 3, 3))\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |                  |\n|:------------------------|:-----------------|\n|Name                     |matrix(1:9, 3, 3) |\n|Number of rows           |3                 |\n|Number of columns        |3                 |\n|_______________________  |                  |\n|Column type frequency:   |                  |\n|numeric                  |3                 |\n|________________________ |                  |\n|Group variables          |None              |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate| mean| sd| p0| p25| p50| p75| p100|hist  |\n|:-------------|---------:|-------------:|----:|--:|--:|---:|---:|---:|----:|:-----|\n|V1            |         0|             1|    2|  1|  1| 1.5|   2| 2.5|    3|▇▁▇▁▇ |\n|V2            |         0|             1|    5|  1|  4| 4.5|   5| 5.5|    6|▇▁▇▁▇ |\n|V3            |         0|             1|    8|  1|  7| 7.5|   8| 8.5|    9|▇▁▇▁▇ |\n\n\n:::\n\n```{.r .cell-code}\n# 時系列データのスキミング\nclass(Nile) # ts\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"ts\"\n```\n\n\n:::\n\n```{.r .cell-code}\nskim(Nile)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |Nile |\n|Number of rows           |100  |\n|Number of columns        |1    |\n|_______________________  |     |\n|Column type frequency:   |     |\n|ts                       |1    |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: ts**\n\n|skim_variable | n_missing| complete_rate| start|  end| frequency| deltat|   mean|     sd| min|  max| median|line_graph |\n|:-------------|---------:|-------------:|-----:|----:|---------:|------:|------:|------:|---:|----:|------:|:----------|\n|x             |         0|             1|  1871| 1970|         1|      1| 919.35| 169.23| 456| 1370|  893.5|⢁⠊⢂⠊⢄⣀⠔⢄   |\n\n\n:::\n:::\n\n\n\n\n## 要約関数を自作する\n\n`skim_with()` 関数を用いることで、要約関数を自作することも可能です。詳しい使い方はパッケージの [Vignette](https://cran.r-project.org/web/packages/skimr/vignettes/using_skimr.html#modifying-skim) をご参照ください。\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_skim <- skim_with(numeric = sfl(n = length, sum, var))\niris |>\n  dplyr::group_by(Species) |>\n  my_skim() |>\n  yank(\"numeric\") |>\n  dplyr::select(skim_variable, Species, hist, n, sum, var)\n```\n\n::: {.cell-output-display}\n\n\n**Variable type: numeric**\n\n|skim_variable |Species    |hist  |  n|   sum|  var|\n|:-------------|:----------|:-----|--:|-----:|----:|\n|Sepal.Length  |setosa     |▃▃▇▅▁ | 50| 250.3| 0.12|\n|Sepal.Length  |versicolor |▂▇▆▃▃ | 50| 296.8| 0.27|\n|Sepal.Length  |virginica  |▁▃▇▃▂ | 50| 329.4| 0.40|\n|Sepal.Width   |setosa     |▁▃▇▅▂ | 50| 171.4| 0.14|\n|Sepal.Width   |versicolor |▁▅▆▇▂ | 50| 138.5| 0.10|\n|Sepal.Width   |virginica  |▂▆▇▅▁ | 50| 148.7| 0.10|\n|Petal.Length  |setosa     |▁▃▇▃▁ | 50|  73.1| 0.03|\n|Petal.Length  |versicolor |▂▂▇▇▆ | 50| 213.0| 0.22|\n|Petal.Length  |virginica  |▃▇▇▃▂ | 50| 277.6| 0.30|\n|Petal.Width   |setosa     |▇▂▂▁▁ | 50|  12.3| 0.01|\n|Petal.Width   |versicolor |▅▇▃▆▁ | 50|  66.3| 0.04|\n|Petal.Width   |virginica  |▂▇▆▅▇ | 50| 101.3| 0.08|\n\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}